name: CI - React Native

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  test:
    name: ğŸ§ª Test & Build Check
    runs-on: ubuntu-latest

    steps:
      - name: â¬‡ï¸ Checkout do cÃ³digo
        uses: actions/checkout@v3

      - name: ğŸŸ¢ Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: ğŸ“¦ Instalar dependÃªncias
        run: |
          npm install

      - name: ğŸ” Verificar TypeScript
        run: |
          npx tsc --noEmit

      - name: ğŸ§ª Executar testes
        run: |
          npm test

      - name: âœ… Build JS (Metro)
        run: |
          npx react-native bundle \
            --platform android \
            --dev false \
            --entry-file index.js \
            --bundle-output /dev/null \
            --assets-dest /dev/null
